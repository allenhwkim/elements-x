<div class="medium-article"><style>
          figure { margin: 16px 0;}
          img {max-width: 100%; max-height: 100%;}
          .layout-1 { max-width: 680px; }
          .layout-3 { max-width: 1192px; }
          .layout-5 { width: 100%; }
          .layout-6 { width: 30%;}
          .layout-7 { width: 30%;}</style>
<h1 class="title">Angular: Make div tag editable</h1>
<h2 class="subtitle">Transform div tag to input box using contenteditable attribute and <a href="https://angular.io/api/forms/ControlValueAccessor">ControlValueAccessor</a></h2>
<div style="display:flex; flex-wrap: wrap"><figure class="layout-1"><img src="https://cdn-images-1.medium.com/max/700/0*mQIDg5r_i7S6yZ7D" /><figcaption>Photo by <a href="https://unsplash.com/@joannakosinska?utm_source=medium&utm_medium=referral">Joanna Kosinska</a> on <a href="https://unsplash.com?utm_source=medium&utm_medium=referral">Unsplash</a></figcaption></figure></div>
<h2>How does it work?</h2>
<div class="list bulletin">Make text editable using <span class="quote">contenteditable</span> attribute</div>
<div class="list bulletin">When text updated, bind the text value with ngModel using <a href="https://angular.io/api/forms/ControlValueAccessor">ControlValueAccessor</a></div>
<div class="list bulletin">It works like normal <span class="quote">&lt;input type=‚Äùtext‚Äù></span> including error validation as well as disabled status</div>
<pre>&lt;div text-editable required<br/>  [disabled]="disabled"<br/>  placeholder="Enter name min. 2, max 5"<br/>  maxlength="5"<br/>  minlength="2"<br/>  pattern="[a-zA-z]+"<br/>  #nameDiv="ngModel"<br/>  [(ngModel)]="name">{{name}}>&lt;/div></pre>
<p><a href="https://angular.io/api/forms/ControlValueAccessor">ControlValueAccessor</a> is an interface that acts as a bridge between the Angular forms API and a native element in the DOM. As usual with other interface, you need to declare the required methods</p>
<div class="list bulletin">writeValue</div>
<div class="list bulletin">registerOnChange</div>
<div class="list bulletin">registerOnTouched</div>
<div class="list bulletin">setDisabledState</div>
<p>To explain more,</p>
<p><span class="quote">writeValue</span>: Executed when initialized. It sets the ngModel value to the element.</p>
<pre>writeValue(value) {<br/>  this.el.textContent = value || '';<br/>}</pre>
<p><span class="quote">registerOnChange</span>(fn): Executed when initialized. You can call this function with the text value when text is updated</p>
<pre>@HostListener('input') callOnChange(){<br/>  this.onChange(this.el.textContent);<br/>}<br/>registerOnChange(fn) { this.onChange = fn; }</pre>
<p>When the function is called, it updates ngModel value and also sets the following</p>
<div class="list bulletin">Error status, which is accessible by ngModel.errors</div>
<div class="list bulletin">Error classes; ng-prinstine, ng-dirty, ng-touched, ng-valid, ng-invalid</div>
<p><span class="quote">registerOnTouched</span>: Executed when initialized. You can call this function inside blur event listener</p>
<pre>@HostListener('blur') callOnTouched() { this.onTouched(); }<br/>registerOnTouched(fn) { this.onTouched = fn; }</pre>
<p>When the function is called, it updates ngModel value and also sets error classes; ng-prinstine, ng-dirty, ng-touched</p>
<p><span class="quote">setDisabledState</span>: This function is called when element property disabled is changed. You can use this to set attribute or style.</p>
<pre>setDisabledState(val: boolean): void {<br/>  this.el.setAttribute('disabled', String(val));<br/>  this.el.setAttribute('contenteditable', String(!val));<br/>}</pre>
<p>Here is demo which compares <span class="quote">&lt;input></span> and normal <span class="quote">&lt;div></span> tag with <span class="quote">text-editable </span>directive.</p>
<div style="display:flex; flex-wrap: wrap"><figure class="layout-1"><iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fstackblitz.com%2Fedit%2Fangular-text-editable%3Fembed%3D1%26view%3Dpreview&display_name=StackBlitz&url=https%3A%2F%2Fstackblitz.com%2Fedit%2Fangular-text-editable%3Fview%3Dpreview&image=https%3A%2F%2Fc.staticblitz.com%2Fassets%2Ficon-1d2450aadcf984376236c23cd2ab0ba231ddd1d85c9b72990ed2ede5b4974d1b.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=stackblitz" width="745" height="400"></iframe><figcaption></figcaption></figure></div>
<p>Happy coding :)</p>
<p>This article is a part of <a href="https://medium.com/@allenhwkim/angular-random-how-tos-61be27cac0a2">Angular Random How-Tos</a>. You may find some useful articles for your daily development.</p>
<p><b>Do you think this useful? If so please;<br/>*</b> <b>Clap üëè button </b>belowÔ∏è to let others to see this too.<br/>* <a href="https://twitter.com/allenhwkim">Follow Allen on Twitter (@allenhwkim)</a></p></div>