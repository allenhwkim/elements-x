<div class="medium-article"><style>
          figure { margin: 16px 0;}
          img {max-width: 100%; max-height: 100%;}
          .layout-1 { max-width: 680px; }
          .layout-3 { max-width: 1192px; }
          .layout-5 { width: 100%; }
          .layout-6 { width: 30%;}
          .layout-7 { width: 30%;}</style>
<h1 class="title">Javascript: Convert String To Object Value Without `eval`</h1>
<p>This is how to convert <span class="quote">"foo.bar.fuz.baz"</span> to the actual value of <span class="quote">foo.bar.fuz.baz</span> . If the value is not available, it returns <span class="quote">undefined</span></p>
<pre>function str2Val(str, scope=window) {<br/>  const keys = str.split(/[\.\[\]'"]/).filter(e => e);<br/>  let ret = scope;<br/>  <br/>  try {<br/>    keys.forEach(key => {<br/>      ret = ret[key];<br/>    });<br/>    return ret;<br/>  } catch(e) {<br/>    return undefined;<br/>  }<br/>}</pre>
<pre>// The following is for test<br/>window.foo = {<br/>  bar: {<br/>    a: {<br/>      b: {<br/>        'c-end': 'hello'<br/>      }<br/>    }<br/>  }<br/>}</pre>
<pre>console.log(str2Val("foo.bar.a.b['c-end']"))<br/>console.log(str2Val(`foo['bar'].a["b"]['c-end']`))<br/>console.log(str2Val(`bar.a["b"]['c-end']`, foo))<br/>console.log(str2Val(`foo['error'].a["b"].c`, window, true))<br/>console.log(str2Obj(`bar.a["b"]['c-end']`, foo))<br/>console.log(str2Obj(`foo['error'].a["b"].c`, window, true))</pre></div>