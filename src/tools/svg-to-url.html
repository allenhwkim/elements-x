<h2>URL-encoder for SVG</h2>

<div class="svg-url">
  <div class="svg">
    <span class="guide">
      SVG <button id="example">Example</button>
    </span>
    <textarea id="svg"></textarea>
  </div>
  <div class="css">
    <span class="guide"> CSS </span>
    <textarea id="css"></textarea>
  </div>
  <div class="preview">
    <span class="guide">Preview</span> 
    <div id="preview"></div>
  </div>
</div>

<style>
  .svg-url {
    display: flex;
    justify-content: space-evenly;
    height: 400px;
  }
  .svg-url .guide {
    height: 30px;
    display: inline-block;
    line-height: 30px;
  }
  .svg-url > div {
    padding: 8px;
    width: 400px;
  }
  .svg-url #svg,
  .svg-url #css,
  .svg-url #preview {
    width: 100%;
    height: calc(100% - 1em);
    border: 1px solid #ccc;
    font-family: monospace;
    font-size: 14px;
  }
</style>

<script>
  (function() {
    document.querySelector('#example').addEventListener('click', event => {
      document.querySelector('#svg').value =
`<svg>
  <circle r="50" cx="50" cy="50" fill="tomato"/>
  <circle r="41" cx="47" cy="50" fill="orange"/>
  <circle r="33" cx="48" cy="53" fill="gold"/>
  <circle r="25" cx="49" cy="51" fill="yellowgreen"/>
  <circle r="17" cx="52" cy="50" fill="lightseagreen"/>
  <circle r="9" cx="55" cy="48" fill="teal"/>
</svg>`;
      document.querySelector('#svg').dispatchEvent(new Event('change', { bubbles: true }));
    });

    document.querySelector('#svg').addEventListener('change', event => {
      const svg = event.target.value;
      const css = `background-image: url("data:image/svg+xml,` +
        svg.replace('<svg>', `<svg xmlns="http://www.w3.org/2000/svg">`)
          .replace(/"/g, '\'')
          .replace(/</g, '%3C')
          .replace(/>/g, '%3E') 
          .replace(/\n/g, '') +
        `");`;
      document.querySelector('#css').value = css;
      document.querySelector('#preview').setAttribute('style', css);
    });
    document.querySelector('#example').click();
  })();
</script>
