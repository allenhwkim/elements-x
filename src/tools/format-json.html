<h2>Format JSON</h2>

<div class="flex">
  <div class="left">
    <h3>Source</h3>
    <textarea id="source"></textarea>
  </div>

  <div class="right">
    <h3>Result</h3>
    <div class="result" id="result" contenteditable="true"></div> 
  </div>
</div>

<x-button id="format">Format</x-button>

<style>
 .flex {
   display: flex; justify-content: space-between;
 }
 .flex .left, .flex .right {
   flex: 1; margin: 0 8px;
 }
 .flex .left #source {
   min-height: 320px; 
   width: 100%; 
   font-size: 14px;
 }
 .result {
   font-family: monospace;
   display: block;
   border: 1px solid #ccc;
   height: 320px;
   white-space: pre-wrap;
   overflow: auto;
   font-size: 14px;
 }
</style>

<script>
  (function(){
    document.querySelector('#source').innerText = '{"foo": 1, "bar": 2}';
    document.querySelector('#format').addEventListener('click', function() {
      const jsonCode = document.querySelector('#source').value;
      const resultEl = document.querySelector('#result');
      try {
        const parsed = JSON.parse(jsonCode);
        resultEl.innerText = JSON.stringify(parsed, null, '  ');
      } catch (e) {
        resultEl.innerText = e;
        throw e;  
      }
    });
    document.querySelector('#format').click();
  })();
</script>
