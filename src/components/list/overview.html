<app-custom-css>
  .app x-list,
  .app x-list ul {
    display: block;
    padding: 16px;
    background: blue;
    color: #FFF;
  }
  .app x-list [aria-selected] {
    background: blue;
    color: #FFF; 
  }
  .app x-list li {
    font-weight: bold;
  }
  .app x-list li.x-has-list[aria-expanded],
  .app x-list li.x-has-list[aria-expanded] > ul,
  .app x-list .dropdown-menu li > ul {
    background: orange;
  }
  .app x-list .x-highlighted {
    background: green;
  }
</app-custom-css>

<style>
  .message br {
    display: none;
  }
  .message {
    height: 1em;
    background: red;
    color: #FFF;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
</style>

<h3>Features </h3>
<ul class="default">
  <li>Provides navigation through list itmes using keyboard.</li>
  <li>Fires 'x-listitem-selcted` evnet when item is selected by click or keyboard.</li>
  <li>Converts ul/li list to a structured collapsable list.</li> 
  <li>Accessibility full-featured using tabs, space, and arrow keys.</li>
  <li>Show only related items by linking to input element.</li>
  <li>Highlights selected item.</li>
</ul>

<div class="example">
  <h2>With DIV</h2>
  You can navigate list items using keyboard arrow buttons.

  <x-list select-first="true" id="list-div">
    <div>Cat</div>
    <div>Dog</div>
    <div>Fish</div>
    <div>Bird</div>
  </x-list>
  <div class="message" id="message-div">
    &nbsp;
  </div>
  <script>
    document.querySelector('#list-div').addEventListener('x-listitem-selected', evt => {
      document.querySelector('#message-div').innerText = `selected "${evt.detail.outerHTML}:`;
    });
  </script>

  <app-pre>
    &lt;x-list select-first="true">
      &lt;div>Cat&lt;/div>
      &lt;div>Dog&lt;/div>
      &lt;div>Fish&lt;/div>
      &lt;div>Bird&lt;/div>
    &lt;/x-list>
  </app-pre>
</div>

<div class="example">
  <h2>With selected attribute</h2>
  if 'selected' attribute is given with id of list item, it will be highlighted when initialized.

  <x-list selected="fish">
    <div id="cat">Cat</div>
    <div id="dog">Dog</div>
    <div id="fish">Fish</div>
    <div id="bird">Bird</div>
  </x-list>

  <app-pre>
    &lt;x-list selected="fish">
      &lt;div id="cat">Cat&lt;/div>
      &lt;div id="dog">Dog&lt;/div>
      &lt;div id="fish">Fish&lt;/div>
      &lt;div id="bird">Bird&lt;/div>
    &lt;/x-list>
  </app-pre>
</div>

<div class="example">
  <h2>With INPUT</h2>
  <p>
    You can link to input element to display only related items.
  </p>

  <input id="pets" placeholder="Search pet">
  <x-list select-first filter-by="pets">
    <div>Cats</div>
    <div>Dogs</div>
    <div>Birds</div>
    <div>Rabbits</div>
    <div>Guinea pigs</div>
    <div>Fish</div>
  </x-list>

  <app-pre>
    &lt;input <b>id="pets"</b> placeholder="Search pet">
    &lt;x-list select-first <b>filter-by="pets"</b>>
      &lt;div>Cats&lt;/div>
      &lt;div>Dogs&lt;/div>
      &lt;div>Birds&lt;/div>
      &lt;div>Rabbits&lt;/div>
      &lt;div>Guinea pigs&lt;/div>
      &lt;div>Fish&lt;/div>
    &lt;/x-list>
  </app-pre>
</div>

<div class="example">
  <h2>As a popup with x-overlay</h2>
  <p>
    You can display x-list as an overlay with x-overlay 
  </p>

  <input id="pets-2" placeholder="Search pet">
  <x-overlay trigger="pets-2">
    <x-list select-first filter-by="pets-2">
      <div>Cats</div>
      <div>Dogs</div>
      <div>Birds</div>
      <div>Rabbits</div>
      <div>Guinea pigs</div>
      <div>Fish</div>
    </x-list>
  </x-overlay>

  <app-pre>
    &lt;input id="pets-2" placeholder="Search pet">
    &lt;x-overlay trigger="pets-2">
      &lt;x-list select-first filter-by="pets-2">
        &lt;div>Cats&lt;/div>
        &lt;div>Dogs&lt;/div>
        &lt;div>Birds&lt;/div>
        &lt;div>Rabbits&lt;/div>
        &lt;div>Guinea pigs&lt;/div>
        &lt;div>Fish&lt;/div>
      &lt;/x-list>
    &lt;/x-overlay>>
  </app-pre>
</div>

<div class="example">
  <h2>With UL/LI</h2>
  <p>
    The below is multi-leveled list. Click the list, 
    and usingh keyboard to open, close, or navigate list items.
  </p>
  <x-list id="list-ul-li" selected="new">
    <ul class="x-expanded" >
      <li> File
        <ul>
          <li id="new">New</li>
          <li>Open
            <ul>
              <li>File A</li>
              <li>File B</li>
              <li>File C</li>
            </ul>
          </li>
        </ul>
      </li>
      <li> Edit
        <ul>
          <li>Undo</li>
          <li id="redo">Redo</li>
          <li disabled>Cut</li>
          <li disabled>Copy</li>
          <li disabled>Paste</li>
        </ul>
      </li>
      <li> Format
        <ul>
          <li>Font</li>
          <li>Text</li>
        </ul>
      </li>
      <li> View
        <ul>
          <li>100%</li>
          <li>Zoom In</li>
          <li>Zoom Out</li>
        </ul>
      </li>
      <li id="help">Help</li>
    </ul>
  </x-list>
  <div class="message" id="message-ul-li">
    &nbsp;
  </div>
  <script>
    document.querySelector('#list-ul-li').addEventListener('x-listitem-selected', evt => {
      document.querySelector('#message-ul-li').innerText = `selected "${evt.detail.outerHTML}:`;
    });
  </script>

  <app-pre>
    &lt;x-list selected="new">
      &lt;ul class="x-expanded" >
        &lt;li> File
          &lt;ul>
            &lt;li id="new">New&lt;/li>
            &lt;li>Open
              &lt;ul>
                &lt;li>File A&lt;/li>
                &lt;li>File B&lt;/li>
                &lt;li>File C&lt;/li>
              &lt;/ul>
            &lt;/li>
          &lt;/ul>
        &lt;/li>
        &lt;li> Edit
          &lt;ul>
            &lt;li>Undo&lt;/li>
            &lt;li id="redo">Redo&lt;/li>
            &lt;li disabled>Cut&lt;/li>
            &lt;li disabled>Copy&lt;/li>
            &lt;li disabled>Paste&lt;/li>
          &lt;/ul>
        &lt;/li>
        &lt;li> Format
          &lt;ul>
            &lt;li>Font&lt;/li>
            &lt;li>Text&lt;/li>
          &lt;/ul>
        &lt;/li>
        &lt;li> View
          &lt;ul>
            &lt;li>100%&lt;/li>
            &lt;li>Zoom In&lt;/li>
            &lt;li>Zoom Out&lt;/li>
          &lt;/ul>
        &lt;/li>
        &lt;li id="help">Help</li>
      &lt;/ul>
    &lt;/x-list>>
  </app-pre>
</div>

<div class="example">
  <h2>With list data to generate HTML from template</h2>
  <p>
    You can also generate list items automatically by providing template and list data.
    Whenever list data changes, html inside x-list also changes.
    Also, when list item is generated, a variable is assigned to list item with the value of item data.
    You can set the variable name by proving 'var-name' as an attribute of &lt;template> tag.
  </p>

  <input id="country-name">
  <x-list id="country-list" style="height: 200px; overflow: auto; padding: 8px;">
    <template var-name="country">
      <div><b>${alpha3Code}</b> ${name}</div>
    </template>
    <div>Search a country</div>
  </x-list>

  <script>
  // listen to input element key typing, then update the autocomplete list
  var countryName = document.querySelector('#country-name');
  var countryList = document.querySelector('#country-list');
  countryName.addEventListener('input', event => {
    if (!event.target.value) return;
    window.fetch(`https://restcountries.eu/rest/v2/name/${event.target.value}`)
      .then(resp => resp.ok && resp.json())
      .then(resp => countryList.datalist = resp)
  });

  // listen to autocomplete list selection, then update input field and more
  countryList.addEventListener('x-listitem-selected', event => {
    countryName.value = event.detail.country.name;
  });
  </script>

  HTML
  <app-pre>
    &lt;input id="country-name">
    &lt;x-list id="country-list">
      &lt;template var-name="country">
        &lt;div>&lt;b>${alpha3Code}&lt;/b> ${name}&lt;/div>
      &lt;/template>
    &lt;/x-list>
  </app-pre>
 
  Javascript
  <app-pre>
    // listen to input element key typing, then update the autocomplete list
    var countryName = document.querySelector('#country-name');
    var countryList = document.querySelector('#country-list');
    countryName.addEventListener('input', event => {
      if (!event.target.value) return;
      window.fetch(`https://restcountries.eu/rest/v2/name/${event.target.value}`)
        .then(resp => resp.ok && resp.json())
        .then(resp => resp && (countryList.datalist = resp));
    });
  
    // listen to autocomplete list selection, then update input field and more
    countryList.addEventListener('x-listitem-selected', event => {
      countryName.value = event.detail.country.name;
    });
  </app-pre>
</div>

<h3>Attributes</h3>
<li><b>menu-style</b>: When given, the list works like menu by responding to mouseenter/mouseleave</li>
<li><b>select-first</b>: Default true, select the first item when initialized</li>
<li><b>selected</b>:  the id of preselected menu item, default null</li>
<li><b>filter-by</b>: input element id to filter children input</li>

<h3>Events</h3> 
<li><b>x-listitem-selected</b>: Fired when menu item is selected by click or enter pressed</li>
