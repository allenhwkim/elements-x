<h2>Format HTML</h2>

<div class="flex">
  <div class="left">
    <h3>Source</h3>
    <textarea id="source"></textarea>
  </div>

  <div class="right">
    <h3>Result</h3>
    <div class="result" id="result" contenteditable="true"></div>
  </div>
</div>

<x-button id="format">Format</x-button>

<style>
 .flex {
   display: flex; justify-content: space-between;
 }
 .flex .left, .flex .right {
   flex: 1; margin: 0 8px;
 }
 .flex .left #source {
  min-height: 320px; width: 100%; font-size: 14px;
 }
 .result {
   font-family: monospace;
   display: block;
   border: 1px solid #ccc;
   height: 320px;
   white-space: pre-wrap;
   overflow: auto;
   font-size: 14px;
 }
</style>

<script type="module">
  import prettier from "https://unpkg.com/prettier@2.2.1/esm/standalone.mjs";
  import parserHTML from "https://unpkg.com/prettier@2.2.1/esm/parser-html.mjs";

  function format(event) {
    const code = document.querySelector('#source').value;
    const formatted = prettier.format(code, { parser: 'html', plugins: [parserHTML] });
    document.querySelector('#result').innerText = formatted;
  }
  
  (function(){
    document.querySelector('#source').innerText = '<html><head></head><body></body></html>';
    document.querySelector('#format').addEventListener('click', format);
    document.querySelector('#format').click();;
  })();
</script>
