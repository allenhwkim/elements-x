<style>
          figure { margin: 16px 0;}
          img {max-width: 100%; max-height: 100%;}
          .layout-1 { max-width: 680px; }
          .layout-3 { max-width: 1192px; }
          .layout-5 { width: 100%; }
          .layout-6 { width: 30%;}
          .layout-7 { width: 30%;}</style>
<h1 class="title">Javascript: Convert String To Object Value Without `eval`</h1>
<p>This is how to convert <span class="quote">"foo.bar.fuz.baz"</span> to the actual value of <span class="quote">foo.bar.fuz.baz</span> . If the value is not available, it returns <span class="quote">undefined</span></p>
<pre>function str2Val(str, scope=window) {
  const keys = str.split(/[\.\[\]'"]/).filter(e => e);
  let ret = scope;
  
  try {
    keys.forEach(key => {
      ret = ret[key];
    });
    return ret;
  } catch(e) {
    return undefined;
  }
}</pre>
<pre>// The following is for test
window.foo = {
  bar: {
    a: {
      b: {
        'c-end': 'hello'
      }
    }
  }
}</pre>
<pre>console.log(str2Val("foo.bar.a.b['c-end']"))
console.log(str2Val(`foo['bar'].a["b"]['c-end']`))
console.log(str2Val(`bar.a["b"]['c-end']`, foo))
console.log(str2Val(`foo['error'].a["b"].c`, window, true))
console.log(str2Obj(`bar.a["b"]['c-end']`, foo))
console.log(str2Obj(`foo['error'].a["b"].c`, window, true))</pre>