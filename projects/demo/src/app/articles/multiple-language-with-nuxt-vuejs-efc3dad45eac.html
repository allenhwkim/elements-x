<style>
          figure { margin: 16px 0;}
          img {max-width: 100%; max-height: 100%;}
          .layout-1 { max-width: 680px; }
          .layout-3 { max-width: 1192px; }
          .layout-5 { width: 100%; }
          .layout-6 { width: 30%;}
          .layout-7 { width: 30%;}</style>
<h1 class="title">Multiple Language With Nuxt— VueJS</h1>
<p>This is one of many articles that I have covered about VueJS</p>
<li class="bulletin"><a href="https://medium.com/p/6bb1481c6844/edit">React Vs Vue</a></li>
<li class="bulletin"><a href="https://medium.com/p/6dc90cba4b96/edit">Routing With Nuxt: VueJS</a></li>
<li class="bulletin"><a href="https://medium.com/p/efc3dad45eac/edit">Multi-Language With Nuxt: VueJS</a></li>
<li class="bulletin"><a href="https://medium.com/p/d319b27576c3/edit">Resolving Before Route: VueJS</a></li>
<li class="bulletin">Form Valiadation: VueJS</li>
<li class="bulletin">Generating Documentation: VueJS</li>
<li class="bulletin">Multiple Modules: VueJS</li>
<p><a href="https://medium.com/p/6dc90cba4b96/edit">In the previous article</a>, I have covered the following items in this article</p>
<li class="bulletin">State management using Vuex, a VueJS core plugin</li>
<li class="bulletin">Server-Side Rendering using Nuxt, a VueJS core plugin</li>
<li class="bulletin">Routing using vie-router, core plugin, including
- Basic routing
- Lazy loading</li>
<li class="bulletin">Building a package for production</li>
<p>This article will cover multi-language translation using vue-i18n with Nuxt framework.</p>
<p><a href="https://medium.com/p/6dc90cba4b96/edit">The previous Nuxt implementation</a> is all written in English. If you want to add French pages and the language translation must be done in server-side for better performance, we need to use vue-i18n and some setups.</p>
<p>This tutorial will tell you how to implement multiple language in VueJS with server-side rendering feature using Nuxt platform and follows examples at <a href="https://nuxtjs.org/examples/i18n">https://nuxtjs.org/examples/i18n</a></p>
<h2>Steps required.</h2>
<li class="number">install vue-i18n and store file</li>
<li class="number">Create a middleware to handle different languages</li>
<li class="number">Create locale files</li>
<li class="number">Create(or) update pages with translation in mind</li>
<h1>Install i18n and store file</h1>
<h2>install node module</h2>
<pre>$ npm install vue-i18n --save</pre>
<h2>plugins/i18n.js</h2>
<p>This sets up VueI18n application-wide</p>
<pre>import Vue from 'vue';
import VueI18n from 'vue-i18n';</pre>
<pre>Vue.use(VueI18n);</pre>
<pre>export default ({ app, store }) => {
  // Set i18n instance on app
  // This way we can use it in middleware and pages asyncData/fetch
  app.i18n = new VueI18n({
    locale: store.state.locale,
    fallbackLocale: 'en',
    messages: {
      'en': require('~/locales/en.json'),
      'fr': require('~/locales/fr.json')
    }
  });</pre>
<pre>  app.i18n.path = (link) => {
    if (app.i18n.locale === app.i18n.fallbackLocale) {
      return `/${link}`;
    }</pre>
<pre>    return `/${app.i18n.locale}/${link}`;
  }
}</pre>
<h2>store/index.js</h2>
<p>Each state needs to know what language is currently in use. Vuex store is there for this purpose.</p>
<pre>export const state = () => ({
  locales: [‘en’, ‘fr’],
  locale: ‘en’
})</pre>
<pre>export const mutations = {
  SET_LANG(state, locale) {
    if (state.locales.indexOf(locale) !== -1) {
      state.locale = locale
    }
  }
}</pre>
<h2>nuxt.config.js</h2>
<pre>module.exports = {
  loading: { color: '#3B8070' },
  build: {               // customize webpack build
    vendor: ['vue-i18n'] // webpack vue-i18n.bundle.js
  },
  router: {              //<a href="https://router.vuejs.org/en/">vue-router</a>
    middleware: 'i18n'   // middleware all pages of the application
  },
  plugins: ['~/plugins/i18n.js'], // webpack plugin
  generate: {
    routes: ['/', '/about', '/fr', '/fr/about']
  }
}</pre>
<p>To define a dynamic route with a param, you need to define a .vue file <i>OR a directory prefixed by an underscore. e.g., _LANG</i></p>
<h1><b>Create a middleware to handle different languages</b></h1>
<p>middleware/i18n.js</p>
<pre>/*
 * 1. sets i18n.locale and state.locale if possible
 * 2. redirects if not with locale
 */
export default function ({ 
  isHMR, app, store, route, params, error, redirect 
}) {
  if (isHMR) { // ignore if called from hot module replacement
    return;
  } // if url does not have language, redirect to english
  else if (!params.lang) { 
    return redirect('/en'+route.fullPath);
  }</pre>
<pre>  // based on directory structure _lang/xxxx, en/about has params.lang as "en"
  const locale = params.lang || 'en'; 
  store.commit('SET_LANG', locale); // set store
  app.i18n.locale = store.state.locale;
}</pre>
<h1>Create locale files</h1>
<p>Based on the setup, two files are used by <span class="quote">plugins/i18n.js</span>; <span class="quote">locales/en.json</span>, and <span class="quote">locales/fr.json</span> This step is to setup contents of these two files to make the language translation to work without a glitch.</p>
<p>locales/en.json</p>
<pre>{
  "links": {
    "home": "Home",
    ...
  },
  "home": {
    "title": "Welcome",
    "introduction": "This is an introduction in English."
  },
  "about": {
    "title": "About",
    "introduction": "..."
  }
}</pre>
<p>locales/fr.json</p>
<pre>{
  "links": {
    "home": "Accueil",
    ...
  },
  "home": {
    "title": "Bienvenue",
    "introduction": "Ceci est un texte d'introduction en Français."
  },
  "about": {
    "title": "À propos",
    "introduction": "..."
  }
}</pre>
<h1>Create(or) update pages with translation in mind</h1>
<p>pages/_lang/index.vue
pages/_lang/about.vue
pages/_lang/contact.vue
pages/_lang/projects.vue</p>
<pre>&lt;template>
  &lt;div class="Content">
    &lt;div class="container">
      &lt;h1 class="Content__Title">{{ <b>$t('about.title') </b>}}&lt;/h1>
      &lt;p>{{ <b>$t('about.introduction')</b> }}&lt;/p>
    &lt;/div>
  &lt;/div>
&lt;/template></pre>
<pre>&lt;script>
export default {
  head() {
    return { title: this.<b>$t('about.title')</b> }
  }
}
&lt;/script></pre>
<p>The code can be found <a href="https://github.com/allenhwkim/vue-nuxt-practice/tree/2.0">here</a>, and you can see the working example here; <a href="https://vue-nuxt-translation.firebaseapp.com/fr/contact">https://vue-nuxt-translation.firebaseapp.com/fr/contact</a></p>
<h1>Review</h1>
<p><a href="https://medium.com/p/6bb1481c6844/edit">The previous article</a> and <a href="https://medium.com/p/6dc90cba4b96/edit">this article</a> has covered the following;</p>
<li class="bulletin">State management using Vuex, a VueJS core plugin</li>
<li class="bulletin">Server-Side Rendering using Nuxt, a VueJS core plugin</li>
<li class="bulletin">Routing using vie-router, core plugin, including
- Basic routing
- Lazy loading</li>
<li class="bulletin">Building a package for production</li>
<li class="bulletin">Multi-language translation using vue-i18n, 3rd party tool</li>
<p>The next and future article will cover more</p>
<li class="bulletin"><a href="https://medium.com/p/d319b27576c3/edit">Resolving before route</a></li>
<li class="bulletin">Form validation using computed property</li>
<li class="bulletin">Documentation using docsify, 3rd party tool</li>
<li class="bulletin">Separate modules / namespace</li>
<p>See you at the next article</p>
<p>Happy coding</p>