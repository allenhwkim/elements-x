<h1 id="generate-angular-unit-test-automatically">Generate Angular Unit Test Automatically</h1>
<p>How much do you like to write unit tests from the scratch? My guess is ‚Äúnot so much‚Äù. The reason behind this guess is that writing the‚Ä¶</p>
<p>How much do you like to write unit tests from the scratch? My guess is ‚Äúnot so much‚Äù. The reason behind this guess is that writing the first successful unit test is just a copy/paste/modification job, and it‚Äôs not a pleasant task.</p>
<p>What if there is a command that can do this job(copy/paste/modification)?</p>
<p><strong>TL;DR; Yes, there is a command.</strong></p>
<p>Assuming you coded your component, and you want to write a test,</p>
<pre><code>`$ npm install ngentest -g # to run this command anywhere
$ ngentest my.component.ts # node_modules/.bin/gentest`</code></pre>
<p>This will output your auto-generated unit test, and it‚Äôs guaranteed to work.</p>
<h2 id="test-requires-more-coding-and-its-true-">Test requires more coding, and it‚Äôs true :(</h2>
<p>Writing a component is one thing and testing it is another thing. To make your test to work, you need to know and code more the following;</p>
<ul>
<li><p>Import statements</p>
</li>
<li><p>Classes to mock</p>
</li>
<li><p>Window objects to mock</p>
</li>
<li><p>Create <code>TestBed</code> and configure it before each tests</p>
</li>
<li><p>Setup providers using mocks</p>
</li>
<li><p>Etc</p>
</li>
</ul>
<p>The above is just for a component. When it comes to a directive it requires even more for you to code;</p>
<ul>
<li><p>Create a component to test a directive</p>
</li>
<li><p>Get the directive instance from the component</p>
</li>
<li><p>Setting up <code>@input</code>s and <code>@output</code>s to test</p>
</li>
<li><p>and more</p>
</li>
</ul>
<p>It already makes you tired before you write the test. You have been doing this job by copying, pasting and modifying your code, and I am sure you don‚Äôt like it. If there were an AI program, then I would ask AI program to do this job rather than I write it by myself.</p>
<h2 id="generate-the-first-unit-test-automatically">Generate the first unit test automatically</h2>
<p>There is no reason to automate copying/pasting/modifying the test codes for each type; components, directives, services and pipes. It‚Äôs just a matter of;</p>
<ol>
<li><p>Parsing a Typescript file and find out the proper file type.</p>
</li>
<li><p>Building data for unit test from the parsed Typescript.</p>
</li>
</ol>
<ul>
<li><p>className</p>
</li>
<li><p>imports</p>
</li>
<li><p>input/output attributes and properties</p>
</li>
<li><p>mocks</p>
</li>
<li><p>providers for TestBed</p>
</li>
<li><p>list of functions to test</p>
</li>
</ul>
<ol start="3">
<li>Finally, generating unit test from a template</li>
</ol>
<p>That‚Äôs how the Angular Test Generator has been created. <a href="https://github.com/allenhwkim/ngentest">https://github.com/allenhwkim/ngentest</a>.</p>
<p><img src="https://cdn-images-1.medium.com/max/4000/1*-Eudun1Oncstreod9SewcA.png" alt=""></p>
<p>By running a <code>ngentest</code> command, more than half of your test will be done. The only thing you have left is to complete each function tests.</p>
<p>(UPDATE), Now, it also generate function tests</p>
<pre><code>`$ ngentest my.component.ts # node_modules/.bin/gentest
$ ngentest my.directive.ts -s # output to my.directive.spec.ts
$ ngentest my.pipe.ts &gt; my.pipe.test.ts 
$ ngentest my.service.ts`</code></pre>
<p>As you see it <a href="https://github.com/allenhwkim/ngentest/blob/master/examples/example.component.spec.ts">here from the generated code example</a>, the constructor test is 100% complete, but function tests are not done, and I don‚Äôt think even an AI can do this properly(one day, maybe?). You still need to complete each function tests to make the code coverage 100%.</p>
<p>(UPDATE), Now, <a href="https://github.com/allenhwkim/ngentest/">ngentest</a> also generate function tests</p>
<p>The following is an example of automatically generated tests by <code>ngentest</code>.</p>
<p><strong>The good thing is it generate a way more than half of your unit test.</strong> With this help, you can save a lot of time.</p>
<p>These are number of **minimal coverage percentage **by ngentest for each type. 
For simple components and directives, it covers **100% **of your time easily.</p>
<ul>
<li><p>Component (65%)</p>
</li>
<li><p>Directive (65%)</p>
</li>
<li><p>Service (70%)</p>
</li>
<li><p>Pipe (80%)</p>
</li>
</ul>
<p>In general, with <code>ngentest</code>, you can write more than half of your unit test.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*8_YMUGnqxTRfFPLfQ7Y05A.png" alt=""></p>
<h2 id="conclusion">Conclusion</h2>
<p>You can find the code here at Github, <a href="https://github.com/allenhwkim/ngentest/tree/master/src">https://github.com/allenhwkim/ngentest</a></p>
<p>To try this, all you need to do is to install and run <code>ngentest</code> with your file.</p>
<pre><code>`$ npm install ngentest -g # to run this command anywhere
$ ngentest my.component.ts`</code></pre>
<p>Happy Coding :)</p>
<p>May 12th, 2018</p>
<p>Allen Kim
<a href="https://medium.com/allenhwkim/how-to-parse-typescript-from-source-643387971f4e"><strong>How To Parse Typescript From Source</strong>
<em>This is a short and summarized version of how to parse Typescript from source . You can read more about Typescript AST‚Ä¶</em>medium.com</a>
<a href="https://medium.com/allenhwkim/how-to-parse-javascript-from-source-ffbc47b1183b"><strong>How To Parse Javascript From Source</strong>
<em>This is a short version of how to parse Javascript from source. I am writing this tutorial mainly to explain how‚Ä¶</em>medium.com</a></p>
<p>This article is a part of <a href="https://medium.com/@allenhwkim/angular-random-how-tos-61be27cac0a2">*Angular Random How-Tos</a>*. You may find some useful articles for your daily development.</p>
<p>*<em>Do you think this useful? If so please;
**</em> **Clap üëè button **belowÔ∏è to let others to see this too.</p>
<ul>
<li><a href="https://twitter.com/allenhwkim">**Follow Allen on Twitter **(@allenhwkim)</a></li>
</ul>
